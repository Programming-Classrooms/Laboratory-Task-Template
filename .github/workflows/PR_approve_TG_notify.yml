on:
  push:
    branches:
      - main

jobs:
  approved:
    if: github.event.review.state == 'APPROVED'
    runs-on: ubuntu-latest
    steps:
      - name: Get vars
        run: |
          echo "REPO_NAME=$(echo "${{ github.repository }}" | cut -d'/' -f2)" >> $GITHUB_ENV
        
      - name: Update status to Telegram
        uses: appleboy/telegram-action@master
        with:
          to: ${{ secrets.TELEGRAM_PROGRAMMINGBOT_TESTING_TO }}
          token: ${{ secrets.TELEGRAM_PROGRAMMINGBOT_TOKEN }}
          format: markdown
          message: | #https://help.github.com/en/actions/reference/contexts-and-expression-syntax-for-github-actions#github-context
            @${{ github.event.pull_request.user.login }}, *—Ç–≤–æ–π Pull Request –æ–¥–æ–±—Ä–µ–Ω! –ú–æ–∂–µ—à—å —Å–ª–∏—Ç—å –≤–µ—Ç–∫–∏!* üéâ
            
            üíª *–ü—Ä–æ–µ–∫—Ç:*  ${{ env.REPO_NAME }}
            
            üåø *–í–µ—Ç–∫–∏:*  `${{ github.base_ref }}` <-- `${{ github.head_ref }}`
            
            ‚úÖ *–†–µ–≤—å—é–µ—Ä:*  ${{ env.COMMITS }}
            
            üîó *–°—Å—ã–ª–∫–∞:*  [—Ç—ã–∫—Å—é–¥–∞](${{ github.event.pull_request.html_url }})
